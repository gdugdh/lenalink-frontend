# –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ LenaLink

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–∏—á–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –Ω–∞ Next.js 16 (App Router) + TypeScript + Shadcn/ui —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ç—Ä—ë—Ö —Ä–æ–ª–µ–π (User, Admin, Partner).

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ](#–∫—Ä–∞—Ç–∫–æ–µ-—Ä–µ–∑—é–º–µ)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞](#–∑–∞–ø—É—Å–∫-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã](#—Ç–µ—Å—Ç–æ–≤—ã–µ-–∞–∫–∫–∞—É–Ω—Ç—ã)
5. [Acceptance Criteria](#acceptance-criteria)
6. [API –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã](#api-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
7. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-–¥–µ—Ç–∞–ª–∏)

---

## –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

–ü—Ä–æ—Ç–æ—Ç–∏–ø –≤–∫–ª—é—á–∞–µ—Ç:

- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –°—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ **–†–æ–ª–∏**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä—ë—Ö —Ä–æ–ª–µ–π (user, admin, partner)
- ‚úÖ **–õ–∏—á–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã**: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤**: Middleware –∏ server-side guards
- ‚úÖ **Mock-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ HTTP-only cookies
- ‚úÖ **Mobile-first UI**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å Shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoginClient.tsx       # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —Ñ–æ—Ä–º–æ–π
‚îÇ   ‚îî‚îÄ‚îÄ register/
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx              # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ RegisterClient.tsx    # –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îî‚îÄ‚îÄ [role]/
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx              # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–∞—à–±–æ—Ä–¥–∞ (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è)
‚îÇ       ‚îú‚îÄ‚îÄ DashboardClient.tsx   # –†–æ—É—Ç–∏–Ω–≥ –∫ –Ω—É–∂–Ω–æ–º—É –¥–∞—à–±–æ—Ä–¥—É
‚îÇ       ‚îú‚îÄ‚îÄ UserDashboard.tsx     # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ       ‚îú‚îÄ‚îÄ AdminDashboard.tsx    # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ       ‚îî‚îÄ‚îÄ PartnerDashboard.tsx  # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞
‚îÇ
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ auth/
‚îÇ       ‚îú‚îÄ‚îÄ login/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # POST /api/auth/login
‚îÇ       ‚îú‚îÄ‚îÄ register/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # POST /api/auth/register
‚îÇ       ‚îú‚îÄ‚îÄ logout/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ route.ts          # POST /api/auth/logout
‚îÇ       ‚îî‚îÄ‚îÄ session/
‚îÇ           ‚îî‚îÄ‚îÄ route.ts          # GET /api/auth/session
‚îÇ
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx           # React Context –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                   # –§—É–Ω–∫—Ü–∏–∏: loginMock, registerMock, getSession, requireRole
‚îÇ   ‚îî‚îÄ‚îÄ mockUsers.ts              # MOCK_USERS —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ui/                       # Shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Input, Card, Table, etc.)
‚îÇ
‚îú‚îÄ‚îÄ layout.tsx                    # Root layout —Å AuthProvider
‚îî‚îÄ‚îÄ middleware.ts                 # –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
```

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+ 
- npm, pnpm –∏–ª–∏ yarn

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ npm
npm install

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ pnpm (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
pnpm install

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ yarn
yarn install
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
npm run dev
# –∏–ª–∏
pnpm dev
# –∏–ª–∏
yarn dev
```

–ü—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:3000](http://localhost:3000)

### –°–±–æ—Ä–∫–∞ –¥–ª—è production

```bash
npm run build
npm start
```

---

## –¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

–í —Å–∏—Å—Ç–µ–º–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ç—Ä–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞:

| –†–æ–ª—å | Email | –ü–∞—Ä–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-------|--------|----------|
| **User** | `user@example.com` | `password` | –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –±–∞–ª–∞–Ω—Å–æ–º 15,000‚ÇΩ |
| **Admin** | `admin@example.com` | `password` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã |
| **Partner** | `partner@example.com` | `password` | –ü–∞—Ä—Ç–Ω—ë—Ä, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —É—Å–ª—É–≥–∏ |

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–∞—Ä–æ–ª—å `password` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## Acceptance Criteria

### ‚úÖ –¢–µ—Å—Ç-–∫–µ–π—Å—ã

#### 1. –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (User)

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `/auth/login`
2. –í–≤–µ—Å—Ç–∏ `user@example.com` / `password`
3. –í—ã–±—Ä–∞—Ç—å —Ä–æ–ª—å "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–µ–º–æ)
4. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥"
- ‚úÖ –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/dashboard/user`
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å:
  - –ò–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - Email
  - –ë–∞–ª–∞–Ω—Å–æ–º: 15,000‚ÇΩ
  - –ö–Ω–æ–ø–∫–æ–π "–ü–æ–ø–æ–ª–Ω–∏—Ç—å"
  - –ö–∞—Ä—Ç–æ—á–∫–∞–º–∏: "–ú–æ–∏ –±–∏–ª–µ—Ç—ã", "–ò—Å—Ç–æ—Ä–∏—è", "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"

**–§–∞–π–ª—ã:**
- `app/auth/login/LoginClient.tsx`
- `app/dashboard/[role]/UserDashboard.tsx`

---

#### 2. –ü–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–¥–∞—à–±–æ—Ä–¥—É –±–µ–∑ –ø—Ä–∞–≤

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (`user@example.com`)
2. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/dashboard/admin` –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ URL

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Middleware –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
- ‚úÖ –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/dashboard/user` (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚úÖ –ê–¥–º–∏–Ω-–¥–∞—à–±–æ—Ä–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–§–∞–π–ª—ã:**
- `middleware.ts`
- `app/dashboard/[role]/page.tsx` (server-side `requireRole`)

---

#### 3. –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å `/auth/register`
2. **–®–∞–≥ 1:** –í—ã–±—Ä–∞—Ç—å —Ä–æ–ª—å "–ü–∞—Ä—Ç–Ω—ë—Ä"
3. –ù–∞–∂–∞—Ç—å "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å"
4. **–®–∞–≥ 2:** –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
   - –ò–º—è: "–û–û–û –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç"
   - Email: `newpartner@example.com`
   - –ü–∞—Ä–æ–ª—å: `password123`
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è: `password123`
5. –ù–∞–∂–∞—Ç—å "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (33% ‚Üí 66%)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (email —Ñ–æ—Ä–º–∞—Ç, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π)
- ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞"
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
  - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/dashboard/partner`
  - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞

**–§–∞–π–ª—ã:**
- `app/auth/register/RegisterClient.tsx`
- `app/api/auth/register/route.ts`

---

#### 4. Logout –æ—á–∏—â–∞–µ—Ç —Å–µ—Å—Å–∏—é

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É (–ª—é–±–æ–π –∞–∫–∫–∞—É–Ω—Ç)
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (`/dashboard/[role]`)
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–í—ã–π—Ç–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è toast "–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω"
- ‚úÖ –°–µ—Å—Å–∏—è –æ—á–∏—â–∞–µ—Ç—Å—è (cookie —É–¥–∞–ª—è–µ—Ç—Å—è)
- ‚úÖ –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `/`
- ‚úÖ –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞—â–∏—â—ë–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/auth/login`

**–§–∞–π–ª—ã:**
- `app/context/AuthContext.tsx`
- `app/api/auth/logout/route.ts`
- `middleware.ts`

---

#### 5. –ó–∞—â–∏—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
2. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å `/auth/login` –∏–ª–∏ `/auth/register`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Middleware –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –¥–∞—à–±–æ—Ä–¥ (`/dashboard/[role]`)
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ª–æ–≥–∏–Ω–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –±—É–¥—É—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º

**–§–∞–π–ª—ã:**
- `middleware.ts` (—Å—Ç—Ä–æ–∫–∏ 21-31)

---

#### 6. –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

**–®–∞–≥–∏:**
1. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (HTTP-only cookie)
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞—ë—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–∞—à–±–æ—Ä–¥

**–§–∞–π–ª—ã:**
- `app/lib/auth.ts` (—Ñ—É–Ω–∫—Ü–∏—è `getSession`)
- `app/context/AuthContext.tsx` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏)

---

#### 7. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–¢–µ—Å—Ç-–∫–µ–π—Å—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
- ‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email ‚Üí –æ—à–∏–±–∫–∞ "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email"
- ‚ùå –ü–∞—Ä–æ–ª—å < 6 —Å–∏–º–≤–æ–ª–æ–≤ ‚Üí –æ—à–∏–±–∫–∞ "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
- ‚ùå –ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Üí –æ—à–∏–±–∫–∞ "–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç"
- ‚ùå –ü—É—Å—Ç–æ–µ –∏–º—è ‚Üí –æ—à–∏–±–∫–∞ "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
- ‚ùå Email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –æ—à–∏–±–∫–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–§–∞–π–ª—ã:**
- `app/auth/register/RegisterClient.tsx`

---

#### 8. Mobile-first –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±–æ–π –¥–∞—à–±–æ—Ä–¥ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏–ª–∏ –≤ DevTools (mobile view)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã (flex-col –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, flex-row –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ)
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞—é—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª—ã:**
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Tailwind responsive –∫–ª–∞—Å—Å—ã (`sm:`, `md:`, `lg:`)

---

## API –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã

### POST /api/auth/login

**Request Body:**
```json
{
  "email": "user@example.com",
  "password": "password"
}
```

**Response (200 OK):**
```json
{
  "message": "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ",
  "session": {
    "user": {
      "id": "1",
      "email": "user@example.com",
      "role": "user",
      "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
      "balance": 15000
    },
    "expiresAt": 1704067200000
  }
}
```

**Response (401 Unauthorized):**
```json
{
  "message": "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
}
```

---

### POST /api/auth/register

**Request Body:**
```json
{
  "email": "newuser@example.com",
  "password": "password123",
  "name": "–ù–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
  "role": "user"
}
```

**Response (200 OK):**
```json
{
  "message": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ",
  "session": {
    "user": {
      "id": "4",
      "email": "newuser@example.com",
      "role": "user",
      "name": "–ù–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
      "balance": 0
    },
    "expiresAt": 1704067200000
  }
}
```

**Response (400 Bad Request):**
```json
{
  "message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
}
```

---

### GET /api/auth/session

**Response (200 OK):**
```json
{
  "user": {
    "id": "1",
    "email": "user@example.com",
    "role": "user",
    "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
    "balance": 15000
  },
  "expiresAt": 1704067200000
}
```

**Response (401 Unauthorized):**
```json
{
  "message": "–°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

---

### POST /api/auth/logout

**Response (200 OK):**
```json
{
  "message": "–í—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ"
}
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **–°–µ—Å—Å–∏–∏**: –•—Ä–∞–Ω—è—Ç—Å—è –≤ HTTP-only cookies (`lena-link-session`)
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 7 –¥–Ω–µ–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: Cookie —Å —Ñ–ª–∞–≥–æ–º `secure` –≤ production, `sameSite: 'lax'`

### –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤

1. **Middleware** (`middleware.ts`):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å–µ—Å—Å–∏–∏ –¥–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –†–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ –ª–æ–≥–∏–Ω –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º–æ–º—É –¥–∞—à–±–æ—Ä–¥—É

2. **Server-side guards** (`app/lib/auth.ts`):
   - `requireAuth()` - —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - `requireRole(role)` - —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–æ–ª—å

3. **Client-side**:
   - `AuthContext` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–µ—Å—Å–∏–∏
   - `useAuth()` —Ö—É–∫ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Å—Å–∏–∏ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Shadcn/ui

- `Button` - –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- `Input` - –ø–æ–ª—è –≤–≤–æ–¥–∞
- `Card` - –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `Table` - —Ç–∞–±–ª–∏—Ü—ã –¥–∞–Ω–Ω—ã—Ö
- `Badge` - –º–µ—Ç–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- `Skeleton` - –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `Toast` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `Avatar` - –∞–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `Progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö —Ñ–æ—Ä–º
- `Separator` - —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏
- `RadioGroup` - –≤—ã–±–æ—Ä —Ä–æ–ª–∏

### Mock-–¥–∞–Ω–Ω—ã–µ

–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç—è—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ —Å–µ—Ä–≤–µ—Ä–∞):
- –§–∞–π–ª: `app/lib/mockUsers.ts`
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ `MOCK_USERS`

---

## Out of Scope (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

–°–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ **–Ω–µ –≤–∫–ª—é—á–µ–Ω—ã** –≤ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø:

- ‚ùå –†–µ–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mock-–º–∞—Å—Å–∏–≤)
- ‚ùå JWT —Ç–æ–∫–µ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è HTTP-only cookies)
- ‚ùå Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚ùå –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- ‚ùå –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)
- ‚ùå OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (Google, GitHub –∏ —Ç.–¥.)
- ‚ùå –†–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–∫–Ω–æ–ø–∫–∞ "–ü–æ–ø–æ–ª–Ω–∏—Ç—å" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç toast)
- ‚ùå Unit/E2E —Ç–µ—Å—Ç—ã (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞, –Ω–æ —Ç–µ—Å—Ç—ã –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω—ã)
- ‚ùå CI/CD pipeline
- ‚ùå Rate limiting –¥–ª—è API
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå –ê—É–¥–∏—Ç –ª–æ–≥–æ–≤

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **Unit —Ç–µ—Å—Ç—ã** (Jest + React Testing Library):
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π `loginMock`, `registerMock`
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º

2. **E2E —Ç–µ—Å—Ç—ã** (Playwright):
   - –ü–æ–ª–Ω—ã–π flow –ª–æ–≥–∏–Ω–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ logout

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **Production-ready:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
   - CSRF –∑–∞—â–∏—Ç–∞
   - Rate limiting
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
   - Refresh tokens
   - Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
   - –°–µ—Å—Å–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø–æ IP

### CI/CD

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π pipeline:
```yaml
- Lint (ESLint)
- Type check (TypeScript)
- Unit tests
- E2E tests
- Build
- Deploy
```

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª —Å –ª–æ–≥–∞–º–∏ Next.js
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Node.js (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 18+)

---

**–í–µ—Ä—Å–∏—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞:** 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2024  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Next.js 16, TypeScript, Tailwind CSS, Shadcn/ui
